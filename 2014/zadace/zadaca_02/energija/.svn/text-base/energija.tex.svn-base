\documentclass{natprog}

\usepackage[utf8]{inputenc}
\usepackage[official]{eurosym}
\usepackage[T1]{fontenc}
\usepackage{currvita}
\usepackage[official]{eurosym}


%D. Santl
%IME ZADATKA
\renewcommand{\longtaskname}{ENERGIJA}

%D. Santl
%Svrha zadatka (zadaca, ispit, bonus...)
\renewcommand{\TranslationTaskSet}{2. domaća zadaća}

%D. Santl
%Akademska godina
\renewcommand{\TranslationYear}{2013/2014}

%D. Santl
%Broj bodova, time limit, memory limit
%Ovo treba popraviti da budu varijable a ne newcommand
\renewcommand{\maxpoints}{100} 
\renewcommand{\timelimit}{2s} 
\renewcommand{\memorylimit}{32 MB}
\renewcommand{\taskauthor}{Dino Šantl}
%Ako nema imena (prazno) automatski se brise prilagodi stavka:
\renewcommand{\addedby}{} 

%D. Santl
%Koristiti ispd navedene naredbe u slucaju pisanja zadataka na engleskom
%\renewcommand{\TranslationPageOf}[2]{Stranica #1 od #2}
%\renewcommand{\TranslationInputFile}{Ulazna datoteka}
%\renewcommand{\TranslationOutputFile}{Izlazna datoteka}
%\renewcommand{\TranslationSourceFile}{Izvorna datoteka}
%\renewcommand{\TranslationTimeLimit}{Vremensko ograničenje}
%\renewcommand{\TranslationMemoryLimit}{Memorijsko ograničenje}
%\renewcommand{\TranslationPoints}{Bodovi}
%\renewcommand{\TranslationAuthor}{Autor}
%\renewcommand{\TranslationAddedBy}{Prilagodio}
%\renewcommand{\TranslationAuthor}{Autor}
%\renewcommand{\TranslationAddedBy}{Prilagodio}

\begin{document}

Upravo ste dobili posao u CERN-u. Trenutno se istražuje neka čudna fizikalna pojava i Vaš zadatak je da pomognete fizičarima napraviti efikasan programski alat.

Fizičari posjeduju dugu cijev duljine \textbf{L}. Na svaki metar te cijevi (počevši od početka cijevi) mogu se montirati specijalni senzori. Svaki senzor ima svojstvo jakosti \textbf{K}.

Fizičari ispaljuju čestice kroz tu cijev i pomoću senzora mjere energiju. Kao što znamo samim mjerenjem energije utječemo na česticu i mijenjamo njezinu energiju. Zbog toga izmjerena energija na nekom senzoru ovisi o senzorima kroz koje je ta čestica već prošla.

Nepreciznost senzora na poziciji $i$ (udaljenost od početka cijevi) računa se kao:
$$\Gamma(i) = \left [ ( max_{j=0..i}(K_{j}) - min_{j=0..i}(K_{j}) \right ] \cdot i$$

Fizičari trebaju program u koji mogu dodavati senzor na poziciju $\mathbf{i}$, ukloniti senzor na poziciji $\mathbf{i}$ te tražiti senzor s najvećom nepreciznošću koja je manja ili jednaka zadanoj vrijednosti \textbf{R}.

\begin{inputSpec}
Prva linija sadrži pozitivan cijeli broj - duljinu cijevi \textbf{L} ($1 \le \mathbf{L} \le 10^5$).

Slijedi nepoznat broj linija. U svakoj liniji nalazi se opis akcije koje neki fizičar može napraviti: dodavanje, brisanje, upit.

\begin{itemize}
	\item ADD I K - dodaj senzor jakosti \textbf{K} na poziciju \textbf{I}.  Prije toga potrebno je maknuti senzor koji već postoji na toj poziciji (samo jedan senzor po poziciji je moguć).
	\item DEL I - obriši senzor na poziciji \textbf{I} (ako postoji). 
	\item QUERY R - vrati najveću poziciju senzora koji ima vrijednost nepreciznosti manju ili jednaku \textbf{R}. Ako ne postoji takav ispisati poziciju \textbf{0}.
\end{itemize}

Jakost \textbf{K} je u granicama: $1 \le \mathbf{K} \le 10^6$.

Nepreciznost \textbf{R} u naredbi je u granicama: $0 \le \mathbf{R} \le 10^{18}$.

Fizičar završava rad tako što unese naredbu "\textbf{EXIT}".

\textbf{NAPOMENA:} Broj naredbi nikada neće biti veći od $10^5$. Za \textbf{50\%} test primjera duljina cijevi \textbf{L} će biti manja ili jednaka \textbf{1000}.

\end{inputSpec}

\begin{outputSpec}
Za svaku naredbu "\textbf{QUERY} R" ispišite poziciju senzora u zasebni red tako da se u redu \emph{t} nalazi izlaz \emph{t}-tog upita. 
\end{outputSpec}

\begin{example}
\exampleInOut{10
ADD 0 1
ADD 2 10
ADD 3 20
QUERY 15
DEL 0
ADD 4 30
QUERY 30
EXIT}{0
3}
\end{example}

\textbf{OBJAŠNJENJE:} Nakon 3 naredbe ADD imamo ovakav raspored: 1, 0, 10, 20, ... . Upit za 15 dati će poziciju 0 zato jer pozicija 1 nije moguća, pozicija 2 ima vrijednost $(10-1)\cdot 2=18$ te pozicija 3 ima vrijednost $(20-1)\cdot 3 = 57$. Najveća pozicija koja ima vrijednost nepreciznosti manju ili jednaku od 15 je upravo 0.

U drugom retku nalazi se ispis za nepreciznost 30. Nakon što se obriše senzor na 0 i doda senzor na poziciju 4 imamo sljedeće nepreciznosti: [-, -, 0, 30, 80, -, ...]. Pozicija 3 ima upravo traženu nepreciznost.

\end{document}

